# State pattern with smart pointers
